\doxysection{nonlinearmodel.\+hpp}
\hypertarget{nonlinearmodel_8hpp_source}{}\label{nonlinearmodel_8hpp_source}\index{src/model/nonlinearmodel.hpp@{src/model/nonlinearmodel.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ "{}isimulatedmodel.hpp"{}}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <cmath>}}
\DoxyCodeLine{00005\ \ }
\DoxyCodeLine{00012\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_non_linear_model_a07009f707dce40107dea8941ccec2e5d}{NonLinearModel}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_i_simulated_model}{ISimulatedModel}}}
\DoxyCodeLine{00013\ \{}
\DoxyCodeLine{00014\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_non_linear_model_a07009f707dce40107dea8941ccec2e5d}{NonLinearModel}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ a,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ b,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ c,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ d)}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ :\ m\_a(a),\ m\_b(b),\ m\_c(c),\ m\_d(d)\ }
\DoxyCodeLine{00025\ \ \ \ \ \{\}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00030\ \ \ \ \ \mbox{\hyperlink{class_non_linear_model_ac558b1556d769c4fee9261ce77ef7f3b}{\string~NonLinearModel}}()\ \textcolor{keyword}{override}\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{class_non_linear_model_ad79cbedb8375089a86fb54172e4a6966}{step}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ u)\textcolor{keyword}{\ override}}
\DoxyCodeLine{00045\ \textcolor{keyword}{\ \ \ \ }\{\ \ \ \ \ }
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ nextY\ =\ m\_a\ *\ m\_y\ -\/\ m\_b\ *\ m\_prevY\ *\ m\_prevY\ +\ m\_c\ *\ u\ +\ m\_d\ *\ sin(m\_prevU);}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ m\_prevY\ =\ m\_y;\ \textcolor{comment}{//\ update\ m\_prevY\ to\ current\ y\ before\ calculating\ nextY}}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ m\_y\ =\ nextY;}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ m\_prevU\ =\ u;}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ nextY;}
\DoxyCodeLine{00051\ \ \ \ \ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00062\ \ \ \ \ std::vector<double>\ \mbox{\hyperlink{class_non_linear_model_ac4ec5911cf8264c0a7bc00fb107c1685}{simulate}}(\textcolor{keywordtype}{double}\ y,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ u,\ \textcolor{keywordtype}{int}\ t)\textcolor{keyword}{\ override}}
\DoxyCodeLine{00063\ \textcolor{keyword}{\ \ \ \ }\{\ \ }
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ m\_prevY\ =\ y\ -\/\ y\_offset;\ \textcolor{comment}{//\ initialize\ m\_prevY\ to\ differentiate\ it\ from\ the\ initial\ y\ \ }}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ std::vector<double>\ results;}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <=\ t;\ i++)}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ m\_prevU\ =\ u\ -\/\ u\_offset;\ \textcolor{comment}{//\ calculate\ m\_prevU\ to\ differentiate\ it\ from\ the\ initial\ u}}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ m\_prevU\ +=\ i*u\_step;}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ results.push\_back(y);}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ y\ =\ \mbox{\hyperlink{class_non_linear_model_ad79cbedb8375089a86fb54172e4a6966}{step}}(u);}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ results;}
\DoxyCodeLine{00074\ \ \ \ \ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ m\_a;\ \textcolor{comment}{//\ Nonlinear\ coefficient\ for\ current\ output\ (y).}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ m\_b;\ \textcolor{comment}{//\ Nonlinear\ coefficient\ for\ squared\ previous\ output\ (prevYÂ²).}}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ m\_c;\ \textcolor{comment}{//\ Nonlinear\ coefficient\ for\ input\ (u).}}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ m\_d;\ \textcolor{comment}{//\ Nonlinear\ coefficient\ for\ sinusoidal\ input\ term.}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ y\_offset\ \{\ 0.001\ \};\ \textcolor{comment}{//\ Initial\ offset\ for\ previous\ output\ value\ (prevY\ =\ y\ -\/\ yOffset).}}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ u\_offset\ \{\ 1\ \};\ \textcolor{comment}{//\ Initial\ offset\ for\ previous\ input\ value\ (prevU\ =\ u\ -\/\ uOffset).}}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ u\_step\ \{\ 0.5\ \};\ \textcolor{comment}{//\ Step\ size\ for\ input\ signal\ increment.}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordtype}{double}\ m\_prevY\ \{\ 0\ \};\ \textcolor{comment}{//\ initialize\ with\ 0}}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordtype}{double}\ m\_prevU\ \{\ 0\ \};\ \textcolor{comment}{//\ initialize\ with\ 0}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \};}

\end{DoxyCode}
